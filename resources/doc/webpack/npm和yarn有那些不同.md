# npm 和 yarn的不同

当npm还是在v3版本的时候，一个名叫yarn的包管理工具横空出世。yarn 很好的解决了npm存在的一些问题：

1. 确定性：通过yarn.lock文件的安装机制保证确定性，无论安装的顺序如何，相同的依赖关系在任何机器和环境下都可以以相同的方式安装。
2. 采用模块扁平的安装方式：将不同版本的安装依赖包按照一定的策略归纳为单个版本的依赖包，以避免创建多个副本造成冗余。
3. 网络性能更好：yarn采用请求排队的理念。类似于并发请求池，能更好的利用网络资源，同时也还引入了失败重试的机制。
4. 采用缓存机制，实现里离线模式。
5. package-lock.json和yarn.lock文件结构上大体相同，但是yarn.lock文件并没有采用json结构，而是采用了一个自定义的标记格式，具有更高的可读性。
6. 相比于npm,yarn.lock文件中子依赖的版本号是不固定的。也就是说单独的yarn.lock文件并不能确定node_modules的目录结构，需要和package.json相结合。
7. yarn采用的是prefer-online模式，优先使用网络资源，当网络请求失败，才去缓存请求数据。